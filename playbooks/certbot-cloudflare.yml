- hosts: localhost
  become: true

  vars:
    certbot_cloudflare_email: "cloudflare@engelcc.com"
    # ansible-vault encrypt_string 'cloudflareAPIKey' --name 'certbot_cloudflare_api_key'
    certbot_cloudflare_api_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38373438346132626633663734646534626261376132373334303362373464326236333261326435
          6236616139633565386161636530346165356364326365350a323639313635353261393339323238
          31623839643162393838633065653631366435343938633335333261323335313937663362613535
          6666336430613233310a316561613132313232623638376130656562386666643937666366643966
          63306233663634383663316434323739323330623261633630616235613130396662643032616238
          3232316536663262633463316464306230653161353437633135

    certbot_certs:
      - email: "{{ certbot_cloudflare_email }}"
        domains:
          - "*.engelcc.com"

  roles:
     - certbot-cloudflare